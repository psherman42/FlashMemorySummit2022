adapter driver bcm2835gpio

bcm2835gpio peripheral_base 0x3f000000
# clk_mhz = sudo cat /sys/devices/system/cpu/0/cpufreq/cpuinfo_cur_freq
# clk_mhz = sudo cat /sys/devices/system/cpu/cpufreq/policy0/cpuinfo_cur_freq
# speed-coeff = 162.448 * clk_mhz
# speed-offset = 0.040 * clk_mhz
# bcm2835gpio speed_coeffs <speed-coeff> <speed-offset>
bcm2835gpio speed_coeffs 97469 24
#bcm2835gpio speed_coeffs 113714 28
#bcm2835gpio speed_coeffs 146203 36
#bcm2835gpio speed_coeffs 194938 48

bcm2835gpio jtag_nums 6 13 26 5
bcm2835gpio swd_nums 6 13
#bcm2835gpio trst_num 12
bcm2835gpio srst_num 12

#reset_config trst_push_pull
#reset_config trst_open_drain

#reset_config srst_push_pull
#reset_config srst_open_drain

#reset_config trst_only
reset_config srst_only
#reset_config trst_and_srst

#reset_config trst_pulls_srst
#reset_config srst_pulls_trst
#reset_config combined
reset_config separate

#reset_config srst_gates_jtag
reset_config srst_nogate

#reset_config connect_assert_srst
#reset_config connect_deassert_srst

#adapter assert srst  ;# after init
#adapter deassert srst  ;# after init

#adapter speed 1000
#adapter speed 1500
#adapter speed 2000
#adapter speed 2500
adapter speed 3000
#adapter speed 3500
#adapter speed 4000
#adapter nsrst_delay 100
#adapterjnsrst_assert_width 150

transport select jtag

jtag newtap riscv cpu -irlen 5 -expected-id 0x20000913

target create riscv.cpu.0 riscv -chain-position riscv.cpu

riscv.cpu.0 configure -work-area-phys 0x80000000 -work-area-size 0x10000 -work-area-backup 0
